{"ast":null,"code":"var _jsxFileName = \"/Users/rohit/Desktop/lost/Frontend/src/components/ChatBoxLayout.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { format } from \"timeago.js\";\nimport { addMessage, getMessages } from '../actions/chatActions';\nimport { getUserDetails } from '../actions/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatBoxLayout() {\n  _s();\n  const [reciverDetails, setReciverDetails] = useState();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const scroll = useRef();\n  useEffect(() => {\n    if (chat) {\n      const userId = chat.members.find(id => id !== loggedInUser);\n      fetchUserDetails(userId);\n    }\n  }, [chat]);\n  const fetchUserDetails = async id => {\n    // const data = await getUserDetails(id);\n    // setReciverDetails(data);\n  };\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        // const data = await getMessages(chat._id);\n        // setMessages(data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    if (chat !== null) fetchMessages();\n  }, [chat]);\n  const handleChange = e => {\n    setNewMessage(e.target.value);\n  };\n  const handleClick = async e => {\n    e.preventDefault();\n    if (!newMessage.trim()) {\n      return;\n    }\n    const textMessage = {\n      senderId: loggedInUser,\n      text: newMessage,\n      chatId: chat._id\n    };\n    const receiverId = chat.members.find(id => id !== loggedInUser);\n    setSendMessage({\n      ...textMessage,\n      receiverId\n    });\n    try {\n      // const data = await addMessage(textMessage);\n      // setMessages([...messages, data]);\n      setNewMessage(\"\");\n    } catch {\n      console.log(\"error\");\n    }\n  };\n  useEffect(() => {\n    if (receivedMessage != null && receivedMessage.chatId === chat._id) {\n      setMessages([...messages, receivedMessage]);\n    }\n  }, [receivedMessage]);\n  useEffect(() => {\n    var _scroll$current;\n    (_scroll$current = scroll.current) === null || _scroll$current === void 0 ? void 0 : _scroll$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"ChatBoxLayout\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatBoxLayout, \"d17aQNnCnkLhT5jXRWJpf9jXKLo=\");\n_c = ChatBoxLayout;\nvar _c;\n$RefreshReg$(_c, \"ChatBoxLayout\");","map":{"version":3,"names":["React","useEffect","useRef","useState","format","addMessage","getMessages","getUserDetails","jsxDEV","_jsxDEV","ChatBoxLayout","_s","reciverDetails","setReciverDetails","messages","setMessages","newMessage","setNewMessage","scroll","chat","userId","members","find","id","loggedInUser","fetchUserDetails","fetchMessages","error","console","log","handleChange","e","target","value","handleClick","preventDefault","trim","textMessage","senderId","text","chatId","_id","receiverId","setSendMessage","receivedMessage","_scroll$current","current","scrollIntoView","behavior","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/rohit/Desktop/lost/Frontend/src/components/ChatBoxLayout.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { format } from \"timeago.js\";\nimport { addMessage, getMessages } from '../actions/chatActions';\nimport { getUserDetails } from '../actions/auth';\nexport default function ChatBoxLayout() {\n\n     const [reciverDetails, setReciverDetails] = useState();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const scroll = useRef();\n\n  useEffect(() => {\n    if (chat) {\n      const userId = chat.members.find((id) => id !== loggedInUser);\n      fetchUserDetails(userId);\n    }\n  }, [chat]);\n\n  const fetchUserDetails = async (id) => {\n    // const data = await getUserDetails(id);\n    // setReciverDetails(data);\n  };\n\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        // const data = await getMessages(chat._id);\n        // setMessages(data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    if (chat !== null) fetchMessages();\n  }, [chat]);\n\n  const handleChange = (e) => {\n    setNewMessage(e.target.value);\n  };\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n    \n    if (!newMessage.trim()) {\n      return;\n    }\n\n    const textMessage = {\n      senderId: loggedInUser,\n      text: newMessage,\n      chatId: chat._id,\n    };\n\n    const receiverId = chat.members.find((id) => id !== loggedInUser);\n\n    setSendMessage({ ...textMessage, receiverId });\n\n    try {\n      // const data = await addMessage(textMessage);\n      // setMessages([...messages, data]);\n      setNewMessage(\"\");\n    } catch {\n      console.log(\"error\");\n    }\n  };\n\n  useEffect(() => {\n    if (receivedMessage != null && receivedMessage.chatId === chat._id) {\n      setMessages([...messages, receivedMessage]);\n    }\n  }, [receivedMessage]);\n\n  useEffect(() => {\n    scroll.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  return (\n    <div>ChatBoxLayout</div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}