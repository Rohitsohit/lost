{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useSelector}from\"react-redux\";import{useNavigate}from\"react-router-dom\";import{format}from\"timeago.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const GoogleMapComponent=()=>{const[startPoint,setStartPoint]=useState('');const[endPoint,setEndPoint]=useState('');const[map,setMap]=useState(null);const[directionsService,setDirectionsService]=useState(null);const[directionsRenderer,setDirectionsRenderer]=useState(null);const[items,setItems]=useState();const history=useNavigate();const data=useSelector(state=>state.items);useEffect(()=>{const google=window.google;const map=new google.maps.Map(document.getElementById('map'),{center:{lat:37.7749,lng:-122.4194},zoom:8});const directionsService=new google.maps.DirectionsService();const directionsRenderer=new google.maps.DirectionsRenderer();directionsRenderer.setMap(map);setMap(map);setDirectionsService(directionsService);setDirectionsRenderer(directionsRenderer);},[]);const handleCalculateRoute=()=>{const google=window.google;directionsService.route({origin:startPoint,destination:endPoint,travelMode:google.maps.TravelMode.DRIVING},(result,status)=>{if(status===google.maps.DirectionsStatus.OK){directionsRenderer.setDirections(result);const route=result.routes[0].overview_path.map(point=>({lat:point.lat(),lng:point.lng()}));filterNearbyPlaces(route);}else{console.error(\"Error fetching directions: \".concat(status));}});};const filterNearbyPlaces=route=>{const google=window.google;const bounds=new google.maps.LatLngBounds();const filteredData=data.filter(place=>{const latLng=new google.maps.LatLng(place.lat,place.lng);return route.some(pathLatLng=>{bounds.extend(pathLatLng);return bounds.contains(latLng);});});console.log(filteredData);setItems(filteredData);};const handleClick=item=>{history(\"/details/\".concat(item._id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-8\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"map\",className:\"mb-6 h-96 border rounded-lg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/2 pr-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"start\",className:\"block text-sm font-medium text-gray-700\",children:\"Start Point\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"start\",name:\"start\",className:\"mt-1 p-2 w-full border rounded-md\",value:startPoint,onChange:e=>setStartPoint(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/2 pl-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"destination\",className:\"block text-sm font-medium text-gray-700\",children:\"Destination\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"destination\",name:\"destination\",className:\"mt-1 p-2 w-full border rounded-md\",value:endPoint,onChange:e=>setEndPoint(e.target.value)})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded\",onClick:handleCalculateRoute,children:\"Items on this Route.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6\",children:!items?/*#__PURE__*/_jsx(_Fragment,{}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"section\",{id:\"Projects\",className:\"w-full mx-3 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-4 lg:grid-cols-4 gap-y-10 gap-x-2 mt-10 mb-5\",children:items.map(item=>/*#__PURE__*/_jsx(\"div\",{className:\"w-72 bg-white shadow-md rounded-xl duration-500 hover:scale-105 hover:shadow-xl cursor-pointer\",onClick:()=>handleClick(item),children:/*#__PURE__*/_jsxs(\"a\",{children:[/*#__PURE__*/_jsx(\"img\",{src:item.images[0],alt:\"Product\",className:\"h-80 w-72 object-cover rounded-t-xl\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 w-72\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 mr-3 uppercase text-xs\",children:item.category}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-black truncate block capitalize\",children:item.details}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 cursor-auto ml-2\",children:item.location}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:format(item.createdAt)})]})]})]})},item._id))})})})]});};export default GoogleMapComponent;","map":{"version":3,"names":["React","useState","useEffect","useSelector","useNavigate","format","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GoogleMapComponent","startPoint","setStartPoint","endPoint","setEndPoint","map","setMap","directionsService","setDirectionsService","directionsRenderer","setDirectionsRenderer","items","setItems","history","data","state","google","window","maps","Map","document","getElementById","center","lat","lng","zoom","DirectionsService","DirectionsRenderer","handleCalculateRoute","route","origin","destination","travelMode","TravelMode","DRIVING","result","status","DirectionsStatus","OK","setDirections","routes","overview_path","point","filterNearbyPlaces","console","error","concat","bounds","LatLngBounds","filteredData","filter","place","latLng","LatLng","some","pathLatLng","extend","contains","log","handleClick","item","_id","className","children","id","htmlFor","type","name","value","onChange","e","target","onClick","src","images","alt","category","details","location","createdAt"],"sources":["/Users/rohit/Desktop/lost/Frontend/src/components/SearchMap.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { format } from \"timeago.js\";\n\nconst GoogleMapComponent = () => {\n  const [startPoint, setStartPoint] = useState('');\n  const [endPoint, setEndPoint] = useState('');\n  const [map, setMap] = useState(null);\n  const [directionsService, setDirectionsService] = useState(null);\n  const [directionsRenderer, setDirectionsRenderer] = useState(null);\n  const [items, setItems] = useState();\n  const history = useNavigate();\n\n    const data = useSelector((state) => state.items);\n    \n  useEffect(() => {\n    const google = window.google;\n    const map = new google.maps.Map(document.getElementById('map'), {\n      center: { lat: 37.7749, lng: -122.4194 },\n      zoom: 8,\n    });\n\n    const directionsService = new google.maps.DirectionsService();\n    const directionsRenderer = new google.maps.DirectionsRenderer();\n    directionsRenderer.setMap(map);\n\n    setMap(map);\n    setDirectionsService(directionsService);\n    setDirectionsRenderer(directionsRenderer);\n  }, []);\n\n  const handleCalculateRoute = () => {\n    const google = window.google;\n    directionsService.route(\n      {\n        origin: startPoint,\n        destination: endPoint,\n        travelMode: google.maps.TravelMode.DRIVING,\n      },\n      (result, status) => {\n        if (status === google.maps.DirectionsStatus.OK) {\n          directionsRenderer.setDirections(result);\n          const route = result.routes[0].overview_path.map((point) => ({\n            lat: point.lat(),\n            lng: point.lng(),\n          }));\n          filterNearbyPlaces(route);\n        } else {\n          console.error(`Error fetching directions: ${status}`);\n        }\n      }\n    );\n  };\n\n  const filterNearbyPlaces = (route) => {\n    \n    const google = window.google;\n    const bounds = new google.maps.LatLngBounds();\n\n    const filteredData = data.filter((place) => {\n      const latLng = new google.maps.LatLng(place.lat, place.lng);\n      return route.some((pathLatLng) => {\n        bounds.extend(pathLatLng);\n        return bounds.contains(latLng);\n      });\n    });\n\n    console.log(filteredData);\n    setItems(filteredData);\n    \n  };\n\n  const handleClick = (item) => {\n    history(`/details/${item._id}`);\n}\n\n\n  return (\n    <div className=\"container mx-auto p-8\">\n      {/* Google Map Frame */}\n      <div id=\"map\" className=\"mb-6 h-96 border rounded-lg\"></div>\n\n      {/* Input Layout for Start and Destination */}\n      <div className=\"flex justify-between mb-6\">\n        <div className=\"w-1/2 pr-2\">\n          <label htmlFor=\"start\" className=\"block text-sm font-medium text-gray-700\">\n            Start Point\n          </label>\n          <input\n            type=\"text\"\n            id=\"start\"\n            name=\"start\"\n            className=\"mt-1 p-2 w-full border rounded-md\"\n            value={startPoint}\n            onChange={(e) => setStartPoint(e.target.value)}\n          />\n        </div>\n        <div className=\"w-1/2 pl-2\">\n          <label htmlFor=\"destination\" className=\"block text-sm font-medium text-gray-700\">\n            Destination\n          </label>\n          <input\n            type=\"text\"\n            id=\"destination\"\n            name=\"destination\"\n            className=\"mt-1 p-2 w-full border rounded-md\"\n            value={endPoint}\n            onChange={(e) => setEndPoint(e.target.value)}\n          />\n        </div>\n      </div>\n\n      {/* Calculate Route Button */}\n      <button\n        className=\"bg-blue-500 text-white px-4 py-2 rounded\"\n        onClick={handleCalculateRoute}\n      >\n        Items on this Route.\n      </button>\n\n      {/* Container of Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6\">\n     { !items ? (\n       <>\n       </>\n    ) : (\n        <>\n            <section id=\"Projects\" className=\"w-full mx-3 grid grid-cols-1 sm:grid-cols-1 md:grid-cols-4 lg:grid-cols-4 gap-y-10 gap-x-2 mt-10 mb-5\">\n                {items.map((item) => (\n                    <div key={item._id} className=\"w-72 bg-white shadow-md rounded-xl duration-500 hover:scale-105 hover:shadow-xl cursor-pointer\" onClick={() => handleClick(item)}>\n                        <a>\n                            <img \n                                src={item.images[0]}\n                                alt=\"Product\"\n                                className=\"h-80 w-72 object-cover rounded-t-xl\"\n                            />\n                            <div className=\"px-4 py-3 w-72\">\n                                <span className=\"text-gray-400 mr-3 uppercase text-xs\">{item.category}</span>\n                                <p className=\"text-lg font-bold text-black truncate block capitalize\">{item.details}</p>\n                                <div className=\"flex items-center\">\n                                    <p className=\"text-sm text-gray-600 cursor-auto ml-2\">{item.location}</p>\n                                    <div className=\"ml-auto\">\n                                        {/* Date placeholder */}\n                                        {format(item.createdAt)}\n                                        \n                                    </div>\n                                </div>\n                            </div>\n                        </a>\n                    </div>\n                ))}\n            </section>\n        </>\n    )}\n      </div>\n    </div>\n  );\n};\n\nexport default GoogleMapComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}