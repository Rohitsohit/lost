{"ast":null,"code":"var _jsxFileName = \"/Users/rohit/Desktop/lost/Frontend/src/components/ChatBoxLayout.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { format } from \"timeago.js\";\nimport { addMessage, getMessages } from '../actions/chatActions';\nimport { getUserDetails } from '../actions/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatBoxLayout() {\n  _s();\n  const [reciverDetails, setReciverDetails] = useState();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const scroll = useRef();\n  useEffect(() => {\n    if (chat) {\n      const userId = chat.members.find(id => id !== loggedInUser);\n      fetchUserDetails(userId);\n    }\n  }, [chat]);\n  const fetchUserDetails = async id => {\n    // const data = await getUserDetails(id);\n    // setReciverDetails(data);\n  };\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        // const data = await getMessages(chat._id);\n        // setMessages(data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    if (chat !== null) fetchMessages();\n  }, [chat]);\n  const handleChange = e => {\n    setNewMessage(e.target.value);\n  };\n  const handleClick = async e => {\n    e.preventDefault();\n    if (!newMessage.trim()) {\n      return;\n    }\n    const textMessage = {\n      senderId: loggedInUser,\n      text: newMessage,\n      chatId: chat._id\n    };\n    const receiverId = chat.members.find(id => id !== loggedInUser);\n    setSendMessage({\n      ...textMessage,\n      receiverId\n    });\n    try {\n      // const data = await addMessage(textMessage);\n      // setMessages([...messages, data]);\n      setNewMessage(\"\");\n    } catch {\n      console.log(\"error\");\n    }\n  };\n  useEffect(() => {\n    if (receivedMessage != null && receivedMessage.chatId === chat._id) {\n      setMessages([...messages, receivedMessage]);\n    }\n  }, [receivedMessage]);\n  useEffect(() => {\n    var _scroll$current;\n    (_scroll$current = scroll.current) === null || _scroll$current === void 0 ? void 0 : _scroll$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"ChatBoxLayout\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n_s(ChatBoxLayout, \"d17aQNnCnkLhT5jXRWJpf9jXKLo=\");\n_c = ChatBoxLayout;\nvar _c;\n$RefreshReg$(_c, \"ChatBoxLayout\");","map":{"version":3,"names":["React","useEffect","useRef","useState","format","addMessage","getMessages","getUserDetails","jsxDEV","_jsxDEV","ChatBoxLayout","_s","reciverDetails","setReciverDetails","messages","setMessages","newMessage","setNewMessage","scroll","chat","userId","members","find","id","loggedInUser","fetchUserDetails","fetchMessages","error","console","log","handleChange","e","target","value","handleClick","preventDefault","trim","textMessage","senderId","text","chatId","_id","receiverId","setSendMessage","receivedMessage","_scroll$current","current","scrollIntoView","behavior","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/rohit/Desktop/lost/Frontend/src/components/ChatBoxLayout.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { format } from \"timeago.js\";\nimport { addMessage, getMessages } from '../actions/chatActions';\nimport { getUserDetails } from '../actions/auth';\nexport default function ChatBoxLayout() {\n\n    const [reciverDetails, setReciverDetails] = useState();\n    const [messages, setMessages] = useState([]);\n    const [newMessage, setNewMessage] = useState(\"\");\n    const scroll = useRef();\n\n    useEffect(() => {\n        if (chat) {\n            const userId = chat.members.find((id) => id !== loggedInUser);\n            fetchUserDetails(userId);\n        }\n    }, [chat]);\n\n    const fetchUserDetails = async (id) => {\n        // const data = await getUserDetails(id);\n        // setReciverDetails(data);\n    };\n\n    useEffect(() => {\n        const fetchMessages = async () => {\n            try {\n                // const data = await getMessages(chat._id);\n                // setMessages(data);\n            } catch (error) {\n                console.log(error);\n            }\n        };\n\n        if (chat !== null) fetchMessages();\n    }, [chat]);\n\n    const handleChange = (e) => {\n        setNewMessage(e.target.value);\n    };\n\n    const handleClick = async (e) => {\n        e.preventDefault();\n\n        if (!newMessage.trim()) {\n            return;\n        }\n\n        const textMessage = {\n            senderId: loggedInUser,\n            text: newMessage,\n            chatId: chat._id,\n        };\n\n        const receiverId = chat.members.find((id) => id !== loggedInUser);\n\n        setSendMessage({ ...textMessage, receiverId });\n\n        try {\n            // const data = await addMessage(textMessage);\n            // setMessages([...messages, data]);\n            setNewMessage(\"\");\n        } catch {\n            console.log(\"error\");\n        }\n    };\n\n    useEffect(() => {\n        if (receivedMessage != null && receivedMessage.chatId === chat._id) {\n            setMessages([...messages, receivedMessage]);\n        }\n    }, [receivedMessage]);\n\n    useEffect(() => {\n        scroll.current?.scrollIntoView({ behavior: \"smooth\" });\n    }, [messages]);\n\n    return (\n        <div>ChatBoxLayout</div>\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}